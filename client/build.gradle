/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/6.7.1/samples
 */
import org.apache.tools.ant.taskdefs.condition.Os

group 'cht.gsn'
version '1.0-SNAPSHOT'

def env = 'dev'
if (project.hasProperty('prod')) {
    env = 'prod'
} else if (project.hasProperty('uat')) {
    env = 'uat'
} else if (project.hasProperty('sit')) {
    env = 'sit'
}

def npm = 'npm'
if (Os.isFamily(Os.FAMILY_WINDOWS)) {
    npm = 'npm.cmd'
}

println 'Cilent Environment ' + env + ', npm:' + npm

task frontBuild {
    exec {
        println 'frontend exec "npm install"'
        commandLine "${npm}", "install"
    }
    exec {
        println 'frontend exec "npm run build"'
        commandLine "${npm}", "run", "build"
    }
}

//doLast {
//    exec {
//        workingDir 'src/main/app/MYAPP'
//        commandLine 'cmd', 'c', 'sencha app build'
//    }
//    exec {
//        workingDir 'src/main/app/MYOTHERAPP'
//        commandLine 'cmd', 'c', 'sencha app build'
//    }
//}
//task frontInstall(type:Exec) {
//
//    println 'frontend exec "npm install"'
//    commandLine "${npm}","install"
//    
//}
//
//task frontBuild(type: Exec) {
//    println 'frontend exec "npm run build"'
//
//    commandLine "${npm}","run","build"
//}

